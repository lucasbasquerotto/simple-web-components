/*! Built with http://stenciljs.com */
SimpleWebComponents.loadBundle("bbs7mnhg",["exports"],function(t){var e=window.SimpleWebComponents.h,r=function(){function t(){this.items=[],this.buffer=0,this.scrollAnimationTime=1500,this.cumulativeHeights=[],this.showAmountLoop=new Set,this.totalScrollHeight=-1,this.lastTopPadding=-1,console.log("virtual-scroll")}return t.prototype.componentWillLoad=function(){console.log("componentWillLoad"),this.addParentEventHandlers(this.parentScroll||this.el)},t.prototype.componentDidLoad=function(){console.log("componentDidLoad"),this.refresh()},t.prototype.componentDidUnload=function(){this.removeParentEventHandlers()},t.prototype.componentWillUpdate=function(){console.log("componentWillUpdate"),this.refresh()},t.prototype.refresh=function(t){var e=this;void 0===t&&(t=!1),window.requestAnimationFrame(function(){return e.calculateItems(t)})},t.prototype.addParentEventHandlers=function(t){var e=this;if(this.removeParentEventHandlers(),console.log("parentScroll"),t){var r=function(){return e.refresh()};t.addEventListener("scroll",r),this.disposeScrollHandler=function(){return t.removeEventListener("scroll",r)}}},t.prototype.removeParentEventHandlers=function(){this.disposeScrollHandler&&(this.disposeScrollHandler(),this.disposeScrollHandler=void 0)},t.prototype.getContent=function(){return this.el.shadowRoot.querySelector(".scrollable-content")},t.prototype.getShimElement=function(){return this.el.shadowRoot.querySelector(".total-padding")},t.prototype.calculateItems=function(t){void 0===t&&(t=!1);var e=this.calculateValues(),r=e.start,n=void 0===r?0:r,o=e.startBuffer,i=void 0===o?0:o,l=e.end,s=void 0===l?0:l,a=e.endBuffer,u=void 0===a?0:a;if(n!==this.previousStart||s!==this.previousEnd||!0===t){var c=this.items||[];this.viewPortItems=c.slice(i,u),this.update&&this.update(this.viewPortItems),console.log("slice",n,s,i,u),n!==this.previousStart&&0===n&&this.start&&this.start({start:n,end:s}),s!==this.previousEnd&&s===c.length-1&&this.end&&this.end({start:n,end:s}),this.previousStart=n,this.previousStartBuffer=i,this.previousEnd=s;var h=s-n;if(!this.showAmountLoop.has(h))return this.showAmountLoop.add(h),this.refresh()}this.showAmountLoop.clear()},t.prototype.calculateValues=function(){var t=this.parentScroll||this.el,e=t.scrollTop,r=this.el.children,n=(this.items||[]).length,o=this.parentScroll?this.el.offsetTop:0,i=Math.max(0,(this.totalScrollHeight||0)-o),l=Math.max(0,e-o),s=t.clientHeight||0,a=0,u=0,c=0;if(r&&r.length){var h=this.previousStartBuffer||0,p=h,d=this.cumulativeHeights||[],f=d.length,m=0;if(f<p){f>0&&(m=d[f-1]);for(var g=f;g<p;g++)m+=c,d[g]=m;f=d.length}p&&(m=d[p-1]),console.log("current0",p,h);for(var v=0,y=Array.from(r);v<y.length;v++)m+=y[v].getBoundingClientRect().height||c,d[p]=m,p++;for(c=Math.max(m/p,1),console.log("current1",p);l+s>m&&p<n;)m+=c,d[p]=m,p++;console.log("cumulativeHeight",m,d.length,p),this.cumulativeHeights=d.slice(0,p),f=d.length;for(var b=0,S=0,H=0;b<f&&(S=H,!((H=d[b])>=l));)b++;for(a=b+(l-S)/(H-S);b<f&&(S=H,!((H=d[b])>=l+s));)b++;var w=b+(l+s-S)/(H-S);u=Math.ceil(w-a)}u=Math.max(u,0);var x=Math.max(0,this.buffer||0);n&&!u&&(u=Math.max(x,2));var P=Math.min(Math.ceil(a)+u,n),M=Math.min(P,Math.floor(a));M=Math.max(0,M||0),M=Math.min(M,n);var I=Math.min(M+u,n),A=M-x-1;A=Math.max(0,A);var E=I+x+1;E=Math.min(E,n);var L=this.cumulativeHeights[A-1]||0;if(L!==this.lastTopPadding){var j=this.getContent();j.style.transform="translateY("+L+"px)",j.style.webkitTransform="translateY("+L+"px)",this.lastTopPadding=L}i=c*n;var O=Math.max(0,i+o);return O!==this.totalScrollHeight&&(this.getShimElement().style.height=i+"px",this.totalScrollHeight=i,console.log("totalScrollHeight",O,i,n)),console.log("calc",M,A,I,E,u,l,i),{start:M,startBuffer:A,end:I,endBuffer:E,showCount:u}},t.prototype.render=function(){return[e("div",{class:"total-padding"}),e("div",{class:"scrollable-content"},e("slot",null))]},Object.defineProperty(t,"is",{get:function(){return"sp-virtual-scroll"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"encapsulation",{get:function(){return"shadow"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{buffer:{type:Number,attr:"buffer"},change:{type:"Any",attr:"change"},el:{elementRef:!0},end:{type:"Any",attr:"end"},items:{type:"Any",attr:"items"},parentScroll:{type:"Any",attr:"parent-scroll"},scrollAnimationTime:{type:Number,attr:"scroll-animation-time"},start:{type:"Any",attr:"start"},update:{type:"Any",attr:"update"}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return"[data-sp-virtual-scroll-host]{overflow:hidden;overflow-y:hidden;position:relative;display:block;-webkit-overflow-scrolling:touch}.scrollable-content[data-sp-virtual-scroll]{top:0;left:0;width:100%;height:100%;position:absolute}.total-padding[data-sp-virtual-scroll]{width:1px;opacity:0}"},enumerable:!0,configurable:!0}),t}(),n=function(){function t(){this.count=0,this.amount=4e4,this.intervals=[3e3,6e3],this.items=this.createItems()}return t.prototype.updateItems=function(t){console.log("updateItems",t,(this.items||[]).length),this.scrollItems=t},t.prototype.createItems=function(){var t=this.count*this.amount+1;this.count++;var e=(this.items||[]).concat(".".repeat(this.amount).split("").map(function(e,r){return{name:"item-"+(r+t),text:"Item "+(r+t)}}));return console.log("createItems",e.length),e},t.prototype.componentDidLoad=function(){for(var t=this,e=0,r=this.intervals||[];e<r.length;e++){var n=r[e];setTimeout(function(){return t.items=t.createItems()},n)}},t.prototype.render=function(){var t=this;return e("div",null,"Hello, World! I'm ",this.first," ",this.last,e("br",null),e("sp-virtual-scroll",{items:this.items,update:function(e){return t.updateItems(e)},change:function(t){return console.log("onVirtualChange",t)},start:function(t){return console.log("onStart",t)},end:function(t){return console.log("onEnd",t)},parentScroll:this.el,buffer:10},(this.scrollItems||[]).map(function(t){return e("div",{class:t.name,style:{width:"100%"}},e("div",{style:{width:"100%"}},t.text),t.text.split("").map(function(t){return e("div",{style:{width:"100%"}},"|",t,"|")}))})),"Hello, World! I'm ",this.first," ",this.last,e("br",null))},Object.defineProperty(t,"is",{get:function(){return"virtual-scroll-example"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"encapsulation",{get:function(){return"shadow"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{el:{elementRef:!0},first:{type:String,attr:"first"},items:{state:!0},last:{type:String,attr:"last"},scrollItems:{state:!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return"[data-virtual-scroll-example-host]{display:block;position:relative;height:100%;overflow-y:auto}"},enumerable:!0,configurable:!0}),t}();t.SpVirtualScroll=r,t.VirtualScrollExample=n,Object.defineProperty(t,"__esModule",{value:!0})});